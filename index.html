<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unique Library</title>
  <style>
    body { font-family: system-ui, Arial; margin: 0; background: #0b0f19; color: #e7eaf2; }
    header { padding: 20px 18px; position: sticky; top: 0; background: rgba(11,15,25,.9); backdrop-filter: blur(8px); border-bottom: 1px solid #1f2a44; }
    h1 { margin: 0; font-size: 20px; }
    .sub { margin-top: 6px; color: #a8b3cf; font-size: 13px; }
    .wrap { padding: 18px; max-width: 1100px; margin: 0 auto; }
    .controls { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 14px; }
    input, select { padding: 10px 12px; border-radius: 12px; border: 1px solid #243252; background: #111a2d; color: #e7eaf2; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 12px; }
    .card { border: 1px solid #243252; border-radius: 16px; padding: 14px; background: #0f1629; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .title { font-weight: 700; font-size: 15px; line-height: 1.3; margin: 0 0 6px; }
    .meta { color: #a8b3cf; font-size: 12px; margin: 0 0 10px; }
    .btn { display: inline-block; padding: 9px 12px; border-radius: 12px; border: 1px solid #2f4270; background: #162447; color: #e7eaf2; text-decoration: none; font-size: 13px; }
    .btn:hover { filter: brightness(1.1); }
    .empty { color: #a8b3cf; padding: 40px 0; text-align: center; }
  </style>
</head>
<body>
<header>
  <h1>ðŸ“š Unique Library</h1>
  <div class="sub">GitHub Pages Ã¼zerinde PDF arÅŸivi</div>
</header>

<div class="wrap">
  <div class="controls">
    <input id="q" placeholder="Ara (baÅŸlÄ±k)..." />
    <select id="cat">
      <option value="">TÃ¼m kategoriler</option>
    </select>
  </div>

  <div id="grid" class="grid"></div>
  <div id="empty" class="empty" style="display:none;">SonuÃ§ bulunamadÄ±.</div>
</div>

<script>
  const enc = (path) => path.split('/').map(encodeURIComponent).join('/');

  async function init() {
    const res = await fetch('books.json', { cache: 'no-store' });
    const books = await res.json();

    // kategori dropdown
    const cats = [...new Set(books.map(b => b.category).filter(Boolean))].sort();
    const catSel = document.getElementById('cat');
    cats.forEach(c => {
      const o = document.createElement('option');
      o.value = c; o.textContent = c;
      catSel.appendChild(o);
    });

    const q = document.getElementById('q');
    const grid = document.getElementById('grid');
    const empty = document.getElementById('empty');

    function render() {
      const term = q.value.trim().toLowerCase();
      const c = catSel.value;

      const filtered = books.filter(b => {
        const okTitle = !term || (b.title || '').toLowerCase().includes(term);
        const okCat = !c || b.category === c;
        return okTitle && okCat;
      });

      grid.innerHTML = '';
      empty.style.display = filtered.length ? 'none' : 'block';

      filtered.forEach(b => {
        const a = document.createElement('a');
        a.className = 'btn';
        a.target = '_blank';
        a.rel = 'noopener';
        a.href = enc(b.file);

        const card = document.createElement('div');
        card.className = 'card';

        const t = document.createElement('p');
        t.className = 'title';
        t.textContent = b.title || 'â€”';

        const m = document.createElement('p');
        m.className = 'meta';
        m.textContent = b.category ? `Kategori: ${b.category}` : '';

        card.appendChild(t);
        card.appendChild(m);
        card.appendChild(a);
        a.textContent = 'PDFâ€™yi AÃ§';

        grid.appendChild(card);
      });
    }

    q.addEventListener('input', render);
    catSel.addEventListener('change', render);
    render();
  }

  init().catch(err => {
    document.getElementById('grid').innerHTML =
      '<div class="empty">books.json okunamadÄ±. Dosya adÄ±nÄ± ve konumunu kontrol et.</div>';
    console.error(err);
  });
</script>
</body>
</html>
